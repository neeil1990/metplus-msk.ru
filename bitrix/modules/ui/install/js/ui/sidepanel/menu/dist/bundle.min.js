this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,t,i,s){"use strict";var a;function l(e,t){r(e,t);t.add(e)}function n(e,t,i){r(e,t);t.set(e,i)}function r(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function c(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var u=new WeakMap;var b=new WeakMap;var v=new WeakMap;var o=new WeakSet;var h=function(e){babelHelpers.inherits(t,e);function t(){var e;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));l(babelHelpers.assertThisInitialized(e),o);n(babelHelpers.assertThisInitialized(e),u,{writable:true,value:[]});n(babelHelpers.assertThisInitialized(e),b,{writable:true,value:void 0});n(babelHelpers.assertThisInitialized(e),v,{writable:true,value:false});e.setEventNamespace("ui:sidepanel:menu:collection");e.setItems(i.items);return e}babelHelpers.createClass(t,[{key:"setActiveFirstItem",value:function e(){var t=this.list()[0];if(!t){return}t.setActive(true);t.getCollection().setActiveFirstItem()}},{key:"getActiveItem",value:function e(){return this.list().filter((function(e){return e.isActive()}))[0]}},{key:"syncActive",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,v)){return this}babelHelpers.classPrivateFieldSet(this,v,true);this.list().filter((function(e){return e!==t})).forEach((function(e){e.getCollection().isEmpty()?e.setActive(false):e.getCollection().syncActive(e)}));this.emit("sync:active");babelHelpers.classPrivateFieldSet(this,v,false);return this}},{key:"add",value:function e(t){var i=c(this,o,d).call(this,t);this.emit("change");if(babelHelpers.classPrivateFieldGet(this,b)){this.render()}return i}},{key:"get",value:function e(t){return this.list().filter((function(e){return e.getId()===t}))[0]}},{key:"change",value:function e(t,i){var s=this.list().find((function(e){return e.getId()===t}));if(s){s.change(i);return s}return null}},{key:"remove",value:function e(t){var i=this.list().find((function(e){return e.getId()===t}));if(i){this.emit("change");babelHelpers.classPrivateFieldSet(this,u,this.list().filter((function(e){return e!==i})));i.remove()}}},{key:"setItems",value:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classPrivateFieldSet(this,u,i.map((function(e){return c(t,o,d).call(t,e)})));this.emit("change");if(babelHelpers.classPrivateFieldGet(this,b)){this.render()}return this}},{key:"list",value:function e(){return babelHelpers.classPrivateFieldGet(this,u)}},{key:"isEmpty",value:function e(){return this.list().length===0}},{key:"hasActive",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var i=this.list().some((function(e){return e.isActive()}));if(i){return true}if(!t){return false}return this.list().some((function(e){return e.getCollection().hasActive()}))}},{key:"render",value:function e(){var t=this;if(!babelHelpers.classPrivateFieldGet(this,b)){babelHelpers.classPrivateFieldSet(this,b,s.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(['<div class="ui-sidepanel-menu-items"></div>']))))}babelHelpers.classPrivateFieldGet(this,b).innerHTML="";babelHelpers.classPrivateFieldGet(this,u).forEach((function(e){return babelHelpers.classPrivateFieldGet(t,b).appendChild(e.render())}));return babelHelpers.classPrivateFieldGet(this,b)}}]);return t}(i.EventEmitter);function d(e){var t=this;if(e.active){e.active=!this.hasActive()}else{e.active=false}var i=new z(e);babelHelpers.classPrivateFieldGet(this,u).push(i);i.subscribe("change:active",(function(){if(i.isActive()&&i.getCollection().isEmpty()){t.syncActive(i)}}));i.subscribe("sync:active",(function(){return t.syncActive(i)}));i.subscribe("click",(function(e){return t.emit("click",e)}));i.subscribe("change",(function(){return setTimeout((function(){return t.render()}),0)}));return i}var p,f,H;function m(e,t){P(e,t);t.add(e)}function g(e,t,i){P(e,t);t.set(e,i)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function k(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var y=new WeakMap;var F=new WeakMap;var w=new WeakMap;var T=new WeakMap;var I=new WeakMap;var G=new WeakMap;var C=new WeakMap;var A=new WeakMap;var E=new WeakSet;var M=new WeakSet;var S=new WeakSet;var z=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));m(babelHelpers.assertThisInitialized(i),S);m(babelHelpers.assertThisInitialized(i),M);m(babelHelpers.assertThisInitialized(i),E);g(babelHelpers.assertThisInitialized(i),y,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),F,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),w,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),T,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),I,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),G,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),C,{writable:true,value:void 0});g(babelHelpers.assertThisInitialized(i),A,{writable:true,value:void 0});i.setEventNamespace("ui:sidepanel:menu:item");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),G,new h);i.setLabel(e.label).setActive(e.active).setNotice(e.notice).setId(e.id).setItems(e.items).setClickHandler(e.onclick).setActions(e.actions);babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),G).subscribe("sync:active",(function(){return i.emit("sync:active")}));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),G).subscribe("click",(function(e){return i.emit("click",e)}));return i}babelHelpers.createClass(t,[{key:"setLabel",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(babelHelpers.classPrivateFieldGet(this,F)===t){return this}babelHelpers.classPrivateFieldSet(this,F,t);k(this,E,W).call(this);return this}},{key:"setId",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,y)===t){return this}babelHelpers.classPrivateFieldSet(this,y,t);k(this,E,W).call(this);return this}},{key:"setActive",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;t=!!t;if(babelHelpers.classPrivateFieldGet(this,w)===t){return this}babelHelpers.classPrivateFieldSet(this,w,t);k(this,E,W).call(this,{active:babelHelpers.classPrivateFieldGet(this,w)},"active");return this}},{key:"setNotice",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;babelHelpers.classPrivateFieldSet(this,T,!!t);k(this,E,W).call(this);return this}},{key:"setClickHandler",value:function e(t){babelHelpers.classPrivateFieldSet(this,I,t);return this}},{key:"setActions",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classPrivateFieldSet(this,A,t);return this}},{key:"setItems",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classPrivateFieldGet(this,G).setItems(t||[]);k(this,E,W).call(this);return this}},{key:"getCollection",value:function e(){return babelHelpers.classPrivateFieldGet(this,G)}},{key:"getLabel",value:function e(){return babelHelpers.classPrivateFieldGet(this,F)}},{key:"getId",value:function e(){return babelHelpers.classPrivateFieldGet(this,y)}},{key:"getClickHandler",value:function e(){return babelHelpers.classPrivateFieldGet(this,I)}},{key:"isActive",value:function e(){return babelHelpers.classPrivateFieldGet(this,w)}},{key:"hasNotice",value:function e(){return babelHelpers.classPrivateFieldGet(this,T)}},{key:"hasActions",value:function e(){return babelHelpers.classPrivateFieldGet(this,A).length>0}},{key:"change",value:function e(t){if(!s.Type.isUndefined(t.label)){this.setLabel(t.label)}if(!s.Type.isUndefined(t.active)){this.setActive(t.active)}if(!s.Type.isUndefined(t.notice)){this.setNotice(t.notice)}if(!s.Type.isUndefined(t.id)){this.setId(t.id)}if(!s.Type.isUndefined(t.items)){this.setItems(t.items)}if(!s.Type.isUndefined(t.onclick)){this.setClickHandler(t.onclick)}if(!s.Type.isUndefined(t.actions)){this.setActions(t.actions)}}},{key:"remove",value:function e(){s.Dom.remove(babelHelpers.classPrivateFieldGet(this,C));babelHelpers.classPrivateFieldSet(this,C,null)}},{key:"render",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,G).isEmpty();var i=[];if(babelHelpers.classPrivateFieldGet(this,w)){if(t){i.push("ui-sidepanel-menu-active")}else{i.push("ui-sidepanel-menu-expand")}}var a=s.Loc.getMessage("UI_SIDEPANEL_MENU_JS_"+(this.isActive()?"COLLAPSE":"EXPAND"));babelHelpers.classPrivateFieldSet(this,C,s.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<li class="ui-sidepanel-menu-item ','">\n\t\t\t\t<a\n\t\t\t\t\tclass="ui-sidepanel-menu-link"\n\t\t\t\t\tonclick="','"\n\t\t\t\t\ttitle="','"\n\t\t\t\t>\n\t\t\t\t\t<div class="ui-sidepanel-menu-link-text">',"</div>\n\t\t\t\t\t","\n\t\t\t\t\t","\n\t\t\t\t\t","\n\t\t\t\t</a>\n\t\t\t</li>\n\t\t"])),i.join(" "),k(this,M,L).bind(this),s.Tag.safe(f||(f=babelHelpers.taggedTemplateLiteral(["",""])),babelHelpers.classPrivateFieldGet(this,F)),s.Tag.safe(H||(H=babelHelpers.taggedTemplateLiteral(["",""])),babelHelpers.classPrivateFieldGet(this,F)),!t?'<div class="ui-sidepanel-toggle-btn">'.concat(a,"</div>"):"",babelHelpers.classPrivateFieldGet(this,T)?'<span class="ui-sidepanel-menu-notice-icon"></span>':"",this.hasActions()?'<span class="ui-sidepanel-menu-action-icon ui-btn ui-btn-link ui-btn-icon-edit"></span>':""));if(this.hasActions()){s.Event.bind(babelHelpers.classPrivateFieldGet(this,C).querySelector(".ui-sidepanel-menu-action-icon"),"click",k(this,S,U).bind(this))}if(!babelHelpers.classPrivateFieldGet(this,G).isEmpty()){s.Dom.append(babelHelpers.classPrivateFieldGet(this,G).render(),babelHelpers.classPrivateFieldGet(this,C))}return babelHelpers.classPrivateFieldGet(this,C)}}]);return t}(i.EventEmitter);function W(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.emit("change",e);if(t){this.emit("change:"+t,e)}}function L(e){e.preventDefault();e.stopPropagation();this.setActive(babelHelpers.classPrivateFieldGet(this,G).isEmpty()||!this.isActive());this.emit("click",{item:this});if(s.Type.isFunction(babelHelpers.classPrivateFieldGet(this,I))){babelHelpers.classPrivateFieldGet(this,I).apply(this)}}function U(e){var i=this;e.preventDefault();e.stopPropagation();if(this.actionsMenu){this.actionsMenu.getPopupWindow().close();return}var a=e.currentTarget;s.Dom.addClass(a,"--hover");s.Dom.addClass(a.parentNode,"--hover");this.actionsMenu=new t.Menu({id:"ui-sidepanel-menu-item-actions-".concat(this.getId()),bindElement:a});babelHelpers.classPrivateFieldGet(this,A).forEach((function(e){i.actionsMenu.addMenuItem({text:e.label,onclick:function t(s,a){a.getMenuWindow().close();e.onclick(i)}})}));this.actionsMenu.getPopupWindow().subscribe("onClose",(function(){s.Dom.removeClass(a,"--hover");s.Dom.removeClass(a.parentNode,"--hover");i.actionsMenu.destroy();i.actionsMenu=null}));this.actionsMenu.show()}var N;function D(e,t,i){X(e,t);t.set(e,i)}function X(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var B=new WeakMap;var O=function(e){babelHelpers.inherits(t,e);function t(){var e;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{items:i.items}));D(babelHelpers.assertThisInitialized(e),B,{writable:true,value:void 0});if(!e.hasActive()){e.setActiveFirstItem()}return e}babelHelpers.createClass(t,[{key:"render",value:function e(){var i=babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"render",this).call(this);if(!babelHelpers.classPrivateFieldGet(this,B)){babelHelpers.classPrivateFieldSet(this,B,s.Tag.render(N||(N=babelHelpers.taggedTemplateLiteral(['<ul class="ui-sidepanel-menu"></ul>']))));babelHelpers.classPrivateFieldGet(this,B).appendChild(i)}return babelHelpers.classPrivateFieldGet(this,B)}},{key:"renderTo",value:function e(t){var i=this.render();t.appendChild(i);return i}}]);return t}(h);e.Item=z;e.Menu=O})(this.BX.UI.SidePanel=this.BX.UI.SidePanel||{},BX.Main,BX.Event,BX);
//# sourceMappingURL=bundle.map.js